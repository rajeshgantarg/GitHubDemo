name: Workflow for Android App

on:
  push:
    branches: [ "main" ]

jobs:
  build:
    runs-on: windows-latest

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v2

      - name: Install OpenJDK
        uses: actions/setup-java@v2
        with:
          distribution: 'adopt'
          java-version: '17'
    
      - name: Set up Android SDK
        uses: android-actions/setup-android@v3.2.0
        with:
          sdk-version: '34'

      - name: Set up Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'

      - name: Android Emulator Runner
        uses: ReactiveCircus/android-emulator-runner@v2.33.0
        with:
          api-level: 34                   # Specify the API level for your Android version
          target: google_apis              # Use Google APIs as the target system image
          arch: x86_64                     # CPU architecture (x86, x86_64, arm64-v8a)
          profile: pixel_5                 # Specify a hardware profile (e.g., Pixel 5)
          cores: 2                         # Optional, number of CPU cores for the emulator
          ram-size: 2048M                  # Optional, RAM size for the emulator
          heap-size: 512M                  # Optional, heap size for the emulator
          sdcard-path-or-size: 512M        # Optional, specify SD card size for the emulator
          disk-size: 4G                    # Optional, set disk size
          avd-name: testAVD                # Custom name for the emulator
          force-avd-creation: true         # Force create the AVD even if it already exists
          emulator-boot-timeout: 600       # Emulator boot timeout in seconds (10 minutes)
          emulator-options: -no-window
